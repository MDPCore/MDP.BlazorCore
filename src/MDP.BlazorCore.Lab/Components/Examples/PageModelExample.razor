@using MyLab.Module

@page "/PageModelExample"
@inherits PageComponent<PageModelExample.PageModel>
@code {

    // Class
    public class PageService : InteropService
    {
        // Fields
        private readonly WorkContext _workContext = null;


        // Constructors
        public PageService(WorkContext workContext)
        {
            #region Contracts

            ArgumentNullException.ThrowIfNull(workContext);

            #endregion

            // Default
            _workContext = workContext;
        }


        // Methods
        public Task<PageModel> OnInitializedAsync()
        {
            // Return
            return Task.FromResult(new PageModel
            {
                Message = _workContext.GetValue()
            });
        }
    }

    public class PageModel
    {
        // Properties
        public string Message { get; set; }
    }
}

<PageScript>
    <script>

        // blazorPageLoaded
        document.addEventListener("BlazorPageLoaded", function (event) {

            // runButton
            document.getElementById("runButton").addEventListener("click", function (event) {

                // message
                var message = document.getElementById("messaage").innerText;

                // alert
                alert(message + " By PageModel");
            });
        }, { once: true });
    </script>
</PageScript>


<!-- title -->
<h3>PageModelExample</h3>
<hr />

<!-- run -->
<div id="messaage" style="display:none">@Model?.Message</div>
<button class="btn btn-primary" id="runButton">Run</button>
<br />