@namespace MDP.BlazorCore
@code {

    // Fields
    [Inject]
    public NavigationManager _navigationManager { get; set; }


    // Properties
    [Parameter]
    public string LoginPath { get; set; } = null;


    // Methods
    protected override Task OnInitializedAsync()
    {
        // LoginPath
        var loginPath = this.LoginPath;
        if (string.IsNullOrEmpty(loginPath) == true) loginPath = "/";

        // ReturnUrl
        var returnUrl = string.Empty;
        if (string.IsNullOrEmpty(returnUrl) == true) returnUrl = (new Uri(_navigationManager.Uri)).PathAndQuery;
        if (string.IsNullOrEmpty(returnUrl) == true) returnUrl = "/";

        // Redirect
        _navigationManager.NavigateTo($"{loginPath}?returnUrl={Uri.EscapeDataString(returnUrl)}", true);

        // Return
        return Task.CompletedTask;
    }
}