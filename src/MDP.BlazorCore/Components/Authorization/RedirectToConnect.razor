@namespace MDP.BlazorCore
@code {

    // Fields
    [Inject]
    public NavigationManager _navigationManager { get; set; }


    // Properties
    [Parameter]
    public string ConnectPath { get; set; } = null;


    // Methods
    protected override Task OnInitializedAsync()
    {
        // ConnectPath
        var connectPath = this.ConnectPath;
        if (string.IsNullOrEmpty(connectPath) == true) connectPath = "/";

        // ReturnUrl
        var returnUrl = string.Empty;
        if (string.IsNullOrEmpty(returnUrl) == true) returnUrl = (new Uri(_navigationManager.Uri)).PathAndQuery;
        if (string.IsNullOrEmpty(returnUrl) == true) returnUrl = "/";

        // Redirect
        _navigationManager.NavigateTo($"{connectPath}?returnUrl={Uri.EscapeDataString(returnUrl)}", true);

        // Return
        return Task.CompletedTask;
    }
}